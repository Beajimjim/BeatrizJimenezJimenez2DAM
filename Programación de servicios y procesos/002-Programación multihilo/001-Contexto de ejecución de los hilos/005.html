<!doctype html>
<html>
	<head>
		<!-- Aquí normalmente se colocan los metadatos y el título de la página -->
	</head>
	<body>
		<!-- Campo de entrada para que el usuario ingrese su nombre -->
		<input placeholder="Ingresa tu nombre">

		<script>
			// Selecciona el campo de entrada <input> usando 'querySelector'
			// 'querySelector("input")' busca el primer elemento <input> en el documento
			var entrada = document.querySelector("input");

			// Evento 'onchange' se activa cuando el usuario cambia el contenido del campo de entrada y sale del campo
			entrada.onchange = function() {
				// Muestra un mensaje en la consola del navegador con el nombre ingresado por el usuario
				console.log("Ok te has identificado como", this.value);

				// Realiza una solicitud al servidor usando 'fetch'
				// Aquí se hace una solicitud HTTP GET al archivo '005.php', pasando el nombre del usuario como parámetro
				fetch("005.php?usuario=" + encodeURI(this.value))
					// 'then()' maneja la respuesta del servidor
					// 'response.text()' convierte la respuesta a texto
					.then(function(response) {
						return response.text(); // Devuelve el contenido de la respuesta como texto
					})
					// Maneja los datos recibidos del servidor
					.then(function(datos) {
						// Muestra en la consola que se ha asignado una tarea
						console.log("Te ha tocado la tarea:");
						// Muestra el contenido de la tarea asignada en la consola
						console.log(datos);
					});
			};
		</script>
	</body>
</html>
